# 08 - ูุฎุทุท ุชุฏูู ุงูุจุฑูุงูุฌ | Code Flowchart

## ๐ ุงูููุฏูุฉ ูุงูุฃูุฏุงู ุงูุชุนููููุฉ

### ๐ฏ ูุง ุณุชุชุนููู ูู ูุฐุง ุงููุตู:
1. **๐ญ ุงูุชูููุฑ ุงูููุทูู**: ููููุฉ ุชุญููู ุงููุดุงูู ูุญููุง ุฎุทูุฉ ุจุฎุทูุฉ
2. **๐ ููููู ุงูุฎูุงุฑุฒููุงุช**: ุชุณูุณู ุงูุนูููุงุช ูุชุญููู ูุฏู ูุญุฏุฏ
3. **๐ ุงูุชูุซูู ุงูุจุตุฑู**: ุงุณุชุฎุฏุงู ุงููุฎุทุทุงุช ูููู ููุทู ุงูุจุฑูุงูุฌ
4. **๐ง ุงูุชุฑุฌูุฉ ุงูุนูููุฉ**: ุชุญููู ุงูุฃููุงุฑ ุฅูู ููุฏ ูุงุจู ููุชูููุฐ
5. **โก ุฅุฏุงุฑุฉ ุงูุทุงูุฉ ุงูุฐููุฉ**: ุชุญุณูู ุงุณุชููุงู ุงูุทุงูุฉ ูู ุงูุฃูุธูุฉ ุงููุฏูุฌุฉ

### ๐ง ุงูููุงููู ุงูุฃุณุงุณูุฉ:

#### 1. ูุง ูู ูุฎุทุท ุงูุชุฏูู (Flowchart)ุ
ูุฎุทุท ุงูุชุฏูู ูู ุฑุณู ุจูุงูู ููุถุญ ุฎุทูุงุช ุญู ูุดููุฉ ุฃู ุชูููุฐ ูููุฉ ูุนููุฉ. ูุณุชุฎุฏู ุฑููุฒุงู ููุญุฏุฉ:
- ๐ข **ุงูุฏุงุฆุฑุฉ**: ููุทุฉ ุงูุจุฏุงูุฉ ูุงูููุงูุฉ
- ๐ฆ **ุงููุณุชุทูู**: ุนูููุฉ ุฃู ุฅุฌุฑุงุก
- ๐ท **ุงููุนูู**: ูุฑุงุฑ ุฃู ุดุฑุท
- โก๏ธ **ุงูุณูู**: ุงุชุฌุงู ุงูุชุฏูู

#### 2. ููุงุฐุง ูุณุชุฎุฏู ูุฎุทุทุงุช ุงูุชุฏููุ
- **๐ ุงููุถูุญ**: ุฑุคูุฉ ุดุงููุฉ ูููุธุงู
- **๐ ุงูุชุดุงู ุงูุฃุฎุทุงุก**: ุชุญุฏูุฏ ุงููุดุงูู ูุจู ุงูุจุฑูุฌุฉ
- **๐ ุงูุชูุซูู**: ุดุฑุญ ุงููุธุงู ููุขุฎุฑูู
- **๐ ุงูุชุญุณูู**: ุชุทููุฑ ุงูุฎูุงุฑุฒููุงุช ุจุตุฑูุงู

#### 3. ุงูุทุงูุฉ ุงูุดูุณูุฉ ูู ุงูุฃูุธูุฉ ุงูุฐููุฉ:
- **โ๏ธ ุงูุงุณุชุฏุงูุฉ**: ุชูููู ุงูุงุนุชูุงุฏ ุนูู ุงูุดุจูุฉ ุงูููุฑุจุงุฆูุฉ
- **๐ฐ ุงูุชูููุฑ**: ุชูููุฉ ุชุดุบูู ุฃูู ุนูู ุงููุฏู ุงูุทููู
- **๐ ุงูุจูุฆุฉ**: ุชูููู ุงูุจุตูุฉ ุงููุฑุจูููุฉ
- **๐ ุงูุงุณุชููุงููุฉ**: ุนูู ุงููุธุงู ุญุชู ูู ุงููุทุงุน ุงูููุฑุจุงุก

### ๐ฎ ูู ุงููุนุจ ุฅูู ุงููุงูุน:
ูุฐุง ุงููุดุฑูุน ูุญูู **ุงูุจุฑูุฌุฉ ูู ููููู ูุฌุฑุฏ ุฅูู ุชุทุจูู ุนููู ููุชุน**!
- ูุจุฏุฃ ุจุงูุจูููุงุช ุงููุฑุฆูุฉ (ูุซู ุงูุฃูุนุงุจ) ๐ฏ
- ููุชูู ุฅูู ุงูููุฏ ุงูุญูููู (ูุซู ุงููุญุชุฑููู) ๐ป
- ูุทุจู ุนูู ุฃุฌูุฒุฉ ูุนููุฉ (ูุซู ุงููููุฏุณูู) ๐ง

---

## ๐บ๏ธ ุฎุฑูุทุฉ ุงูุชุนูู ูุงูููุงุฑุงุช

### ๐ ูุณุชููุงุช ุงูุชุนูู:

#### ุงููุณุชูู ุงูุฃูู: ุงูููู ๐ข
- ููู ููููู ุงูุจุฑูุฌุฉ ูุงูุฃูุงูุฑ
- ุงูุชุนุฑู ุนูู ุฃููุงุน ุงูุญุณุงุณุงุช ูุงูุฃุฌูุฒุฉ
- ููู ูุจุงุฏุฆ ุงูููุฑุจุงุก ุงูุฃุณุงุณูุฉ

#### ุงููุณุชูู ุงูุซุงูู: ุงูุชุทุจูู ๐ก 
- ุงุณุชุฎุฏุงู ุงูุจูููุงุช ุงููุฑุฆูุฉ ูู Tinkercad
- ุชุฌููุน ุงูุฏูุงุฆุฑ ุงูุฃุณุงุณูุฉ
- ูุชุงุจุฉ ุจุฑุงูุฌ ุจุณูุทุฉ

#### ุงููุณุชูู ุงูุซุงูุซ: ุงูุชุญููู ๐
- ูุฑุงุกุฉ ูููู ุงูููุฏ ุงูููุชูุจ
- ุชุญููู ูุฎุทุทุงุช ุงูุชุฏูู ุงููุนูุฏุฉ
- ุญู ุงููุดุงูู ุงูุจุฑูุฌูุฉ

#### ุงููุณุชูู ุงูุฑุงุจุน: ุงูุฅุจุฏุงุน ๐ด
- ุชุทููุฑ ุญููู ูุจุชูุฑุฉ
- ุฏูุฌ ุฃูุธูุฉ ูุชุนุฏุฏุฉ
- ุฅูุดุงุก ูุดุงุฑูุน ุดุฎุตูุฉ

### ๐๏ธ ุงูุฃุฏูุงุช ูุงูููุงุฑุงุช ุงููุทููุจุฉ:

#### ุฃุฏูุงุช ุงูุจุฑูุฌุฉ:
- **Tinkercad**: ูููุญุงูุงุฉ ูุงูุจูููุงุช ุงููุฑุฆูุฉ
- **Arduino IDE**: ููุชุงุจุฉ ูุชุญููู ุงูููุฏ
- **Serial Monitor**: ููุฑุงูุจุฉ ูุชุดุฎูุต ุงูุจุฑูุงูุฌ

#### ุงูููุงุฑุงุช ุงูุฃุณุงุณูุฉ:
- **ุงูููุทู ุงูุฑูุงุถู**: ููู ุงูุดุฑูุท ูุงูุญููุงุช
- **ุญู ุงููุดุงูู**: ุชุญููู ูุฅุตูุงุญ ุงูุฃุฎุทุงุก  
- **ุงูุชูููุฑ ุงูููุฏู**: ุชุญุณูู ูุชุทููุฑ ุงูุญููู

#### ุงูููุงููู ุงูููุฑุจุงุฆูุฉ:
- **ุงูุฌูุฏ ูุงูุชูุงุฑ**: ุงููุญุฏุงุช ุงูุฃุณุงุณูุฉ
- **ุงูููุงููุฉ**: ุชุญุฏูุฏ ููู ุงูููุงููุงุช
- **ุงูุฏูุงุฆุฑ**: ุงูุชูุตูู ุนูู ุงูุชูุงูู ูุงูุชูุงุฒู

### ๐ฏ ุฃูุฏุงู ูุฐุง ุงููุตู ุงูุชูุตูููุฉ:

1. **ุชุตููู ููุทู ุงููุธุงู** ๐งฉ
   - ุฑุณู ูุฎุทุท ุชุฏูู ุดุงูู
   - ุชุญุฏูุฏ ููุงุท ุงููุฑุงุฑ ุงูุญุงุณูุฉ
   - ุฑุจุท ุงูุฃุฌุฒุงุก ุงููุฎุชููุฉ ูููุธุงู

2. **ููู ุฅุฏุงุฑุฉ ุงูุทุงูุฉ** โก
   - ุญุณุงุจ ุงุณุชููุงู ุงูุทุงูุฉ
   - ุชุญุณูู ููุงุกุฉ ุงููุธุงู
   - ุจุฑูุฌุฉ ุฃูุธูุฉ ุงูุชูููุฑ ุงูุฐููุฉ

3. **ุชุทุจูู ููุงููู ุงูุฃูุงู** ๐ก๏ธ
   - ุจุฑูุฌุฉ ุฃูุธูุฉ ุงูุฅูุฐุงุฑ
   - ุฅุฏุงุฑุฉ ุญุงูุงุช ุงูุทูุงุฑุฆ
   - ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช

4. **ุงูุชูุงูู ูุน ุงูุฅูุชุฑูุช** ๐
   - ุฅุฑุณุงู ุงูุจูุงูุงุช ููุณุญุงุจุฉ
   - ุงููุฑุงูุจุฉ ุนู ุจูุนุฏ
   - ุงูุชุญุฏูุซุงุช ุงูุขููุฉ

---

## ุฑุญูุฉ ุงูููุฏ: ูู ุงูุจูููุงุช ุงููุฑุฆูุฉ ุฅูู Arduino C++ ๐ฎโก๏ธ๐ป

### ๐ ุงูููุฌ ุงููุจุชูุฑ: ูู Tinkercad ุฅูู ESP32
ูุฐุง ุงููุฎุทุท ููุซู ุงููุณุฎุฉ ุงูููุชุฑุฌูุฉ ูุงูููุญุณูููุฉ ูู ุงูุจุฑูุฌุฉ ุจุงูุจูููุงุช ุงููุฑุฆูุฉ ูู Tinkercad ุฅูู ููุฏ Arduino C++ ูุชูุฏู!

### ๐ ูููุฒุงุช ุงูุชุทููุฑ ุงูุฌุฏูุฏ:
- โ **ููุฏ ููุฎุชุจุฑ ูุณุจูุงู**: ุชู ุชุดุบููู ุจูุฌุงุญ ูู ุงููุญุงูุงุฉ
- โ **ููุทู ูุถููู**: ุฎูุงุฑุฒููุงุช ุชู ุงุฎุชุจุงุฑูุง ุจุตุฑูุงู
- โ **ุจููุฉ ูุงุถุญุฉ**: ุชุฑุฌูุฉ ูุจุงุดุฑุฉ ูู ุงูุจูููุงุช ุงููููููุฉ
- โ **ุชุญุณููุงุช ESP32**: ุงุณุชุบูุงู ูููุฒุงุช WiFi ูุงูุจููุชูุซ
- โ **ุฃูุงู ูุฏูุฌ**: ูุญุต ุงูุฃุฎุทุงุก ูุญุงูุงุช ุงูุทูุงุฑุฆ

### ๐ฏ ุฎุฑูุทุฉ ุงูุชุทููุฑ:
1. **ุงููุญุงูุงุฉ ูู Tinkercad**: ุจูููุงุช ูุฑุฆูุฉ ุจุณูุทุฉ
2. **ุงูุชุตุฏูุฑ**: ููุฏ Arduino C++ ุฃุณุงุณู
3. **ุงูุชุทููุฑ**: ุฅุถุงูุฉ ูููุฒุงุช ESP32 ุงููุชูุฏูุฉ
4. **ุงูุชุญุณูู**: ุชุญุณูู ุงูุฃุฏุงุก ูุงูููุงุกุฉ
5. **ุงูุชุทุจูู**: ููู ููุฌูุงุฒ ุงููุนูู

---

## ๐ฎ ุงูุชุทุจูู ุงูุนููู ูู Tinkercad | Practical Implementation

### ๐ ุงููุฑุญูุฉ ุงูุฃููู: ุฅุนุฏุงุฏ ุงููุดุฑูุน ูู Tinkercad

#### ๐ ุฎุทูุงุช ุงูุจุฏุงูุฉ:

1. **ุฅูุดุงุก ูุดุฑูุน ุฌุฏูุฏ** ๐
   - ุงุฐูุจ ุฅูู [tinkercad.autodesk.com](https://tinkercad.autodesk.com)
   - ุงุถุบุท ุนูู "Create new Circuit"
   - ุงุฎุชุฑ ุงุณู ุงููุดุฑูุน: "Smart Eco Home"

2. **ุฅุถุงูุฉ ุงูููุญุฉ ุงูุฑุฆูุณูุฉ** ๐ง
   - ุงุจุญุซ ุนู "Arduino Uno R3" ูู ููุชุจุฉ ุงูููููุงุช
   - ุงุณุญุจู ุฅูู ููุทูุฉ ุงูุนูู
   - ุถุนู ูู ุงูููุชุตู ูููุทุฉ ูุฑุฌุนูุฉ

### ๐ ุงููุฑุญูุฉ ุงูุซุงููุฉ: ุชูุตูู ุงูููููุงุช ุงูุฃุณุงุณูุฉ

#### 1. ุชูุตูู ุญุณุงุณุงุช ุงูุญุฑูุฉ (PIR) ๐ฅ

```
ููููุงุช ูุทููุจุฉ:
- 2x PIR Motion Sensor
- ุฃุณูุงู ุชูุตูู

ุงูุชูุตูู:
PIR Sensor 1:
- VCC โ 5V ุนูู Arduino
- GND โ GND ุนูู Arduino  
- OUT โ Pin 2 ุนูู Arduino

PIR Sensor 2:
- VCC โ 5V ุนูู Arduino
- GND โ GND ุนูู Arduino
- OUT โ Pin 3 ุนูู Arduino
```

**ุฎุทูุงุช ุงูุชูุตูู ูู Tinkercad:**
1. ุงุจุญุซ ุนู "PIR" ูู ููุชุจุฉ ุงูููููุงุช
2. ุงุณุญุจ ุญุณุงุณูู ุฅูู ููุทูุฉ ุงูุนูู
3. ุงุถุบุท ุนูู ููุทุฉ VCC ุงูุญูุฑุงุก ูุงุณุญุจ ุณูู ุฅูู 5V
4. ุงุถุบุท ุนูู ููุทุฉ GND ุงูุณูุฏุงุก ูุงุณุญุจ ุณูู ุฅูู GND
5. ุงุถุบุท ุนูู ููุทุฉ OUT ูุงุณุญุจ ุณูู ุฅูู Pin 2 (ููุฃูู) ูPin 3 (ููุซุงูู)

#### 2. ุชูุตูู ุญุณุงุณุงุช ุงูุถูุก (LDR) ๐ก

```
ููููุงุช ูุทููุจุฉ:
- 2x Photoresistor (LDR)
- 2x 10kฮฉ Resistor
- ุฃุณูุงู ุชูุตูู

ุงูุชูุตูู (ููุณู ุงูุฌูุฏ):
LDR 1:
- ุทุฑู ูุงุญุฏ โ 5V
- ุงูุทุฑู ุงูุขุฎุฑ โ A0 + ููุงููุฉ 10kฮฉ ุฅูู GND

LDR 2:
- ุทุฑู ูุงุญุฏ โ 5V  
- ุงูุทุฑู ุงูุขุฎุฑ โ A1 + ููุงููุฉ 10kฮฉ ุฅูู GND
```

**ุฎุทูุงุช ุงูุชูุตูู ูู Tinkercad:**
1. ุงุจุญุซ ุนู "Photoresistor" ูู ุงูููููุงุช
2. ุงุจุญุซ ุนู "Resistor" ูุงุฎุชุฑ 10kฮฉ
3. ุงุณุญุจ 2 ูู ูู ููุน ุฅูู ููุทูุฉ ุงูุนูู
4. ูุตู LDR1 ุจูู 5V ูPin A0
5. ูุตู ููุงููุฉ 10kฮฉ ุจูู A0 ูGND
6. ูุฑุฑ ููุณ ุงูุฎุทูุงุช ููู LDR2 ูุน Pin A1

#### 3. ุชูุตูู ุญุณุงุณ ุงูุญุฑุงุฑุฉ ูุงูุฑุทูุจุฉ (DHT22) ๐ก๏ธ

```
ููููุงุช ูุทููุจุฉ:
- 1x DHT22 Temperature & Humidity Sensor
- 1x 4.7kฮฉ Resistor (pull-up)

ุงูุชูุตูู:
DHT22:
- VCC โ 3.3V ุนูู Arduino
- GND โ GND ุนูู Arduino
- Data โ Pin 4 + ููุงููุฉ 4.7kฮฉ ุฅูู VCC
```

#### 4. ุชูุตูู ุงููุฎุฑุฌุงุช (LEDs, Buzzer, Fan) ๐

```
LEDs (ุงูุฅุถุงุกุฉ):
LED 1: Pin 8 โ ููุงููุฉ 220ฮฉ โ LED โ GND
LED 2: Pin 9 โ ููุงููุฉ 220ฮฉ โ LED โ GND

Buzzer (ุงูุฅูุฐุงุฑ):
Buzzer: Pin 10 โ Buzzer โ GND

Fan (ุงูุชูููุฉ):
Fan: Pin 11 โ Fan Module โ GND, VCC to 5V
```

#### 5. ุชูุตูู ุงูุดุงุดุฉ LCD ๐บ

```
LCD 16x2:
- VSS โ GND
- VDD โ 5V  
- V0 โ Potentiometer (ููุชุญูู ูู ุงูุณุทูุน)
- RS โ Pin 12
- Enable โ Pin 13
- D4 โ Pin 7
- D5 โ Pin 6  
- D6 โ Pin 5
- D7 โ Pin 4
```

### ๐งฉ ุงููุฑุญูุฉ ุงูุซุงูุซุฉ: ุงูุจุฑูุฌุฉ ุจุงูุจูููุงุช ุงููุฑุฆูุฉ

#### ๐ฏ ุงููุฏู: ุฅูุดุงุก ุงูููุทู ุงูุฃุณุงุณู ุจุงุณุชุฎุฏุงู Code Blocks

#### 1. ุจููู ุงูุฅุนุฏุงุฏ ุงูุฃุณุงุณู (Setup Block) โ๏ธ

```
ูู ูุณู ุงูุจูููุงุชุ ุงุฎุชุฑ "Code Blocks":

๐ฆ [Setup Block]
โโโ ๐ง set LED pin 8 to OUTPUT
โโโ ๐ง set LED pin 9 to OUTPUT  
โโโ ๐ง set Buzzer pin 10 to OUTPUT
โโโ ๐ง set Fan pin 11 to OUTPUT
โโโ ๐ง set PIR pin 2 to INPUT
โโโ ๐ง set PIR pin 3 to INPUT
โโโ ๐บ print "Smart Home Started!" to Serial Monitor
```

**ุฎุทูุงุช ุงูุชูููุฐ:**
1. ุงุถุบุท ุนูู "Code" ุฃุนูู ูููู ุงูุดุงุดุฉ
2. ุงุฎุชุฑ "Blocks + Text" 
3. ูู ูุงุฆูุฉ "Control" ุงุณุญุจ "Setup" block
4. ูู "Input/Output" ุงุณุญุจ "set pin" blocks
5. ุบูุฑ ุงูุฃุฑูุงู ุญุณุจ ุงูุชูุตููุงุช ุฃุนูุงู

#### 2. ุจููู ุงูุญููุฉ ุงูุฑุฆูุณูุฉ (Main Loop) ๐

```
๐ฉ [Forever Loop Block]
โโโ ๐ read PIR sensor on pin 2 โ store in "motion1"
โโโ ๐ read PIR sensor on pin 3 โ store in "motion2"  
โโโ ๐ read analog pin A0 โ store in "light1"
โโโ ๐ read analog pin A1 โ store in "light2"
โโโ ๐ง [IF Block] motion1 = HIGH
โ   โโโ ๐ก turn ON LED on pin 8
โโโ ๐ง [ELSE Block]  
โ   โโโ ๐ก turn OFF LED on pin 8
โโโ ๐ง [IF Block] light1 < 500
โ   โโโ ๐ก turn ON LED on pin 8
โโโ ๐ง [ELSE Block]
โ   โโโ ๐ก turn OFF LED on pin 8
โโโ โฐ wait 1 second
```

#### 3. ุจูุงุก ููุทู ุงูุชุญูู ุงูุฐูู ๐ค

##### ุฃ) ููุทู ุงูุฅุถุงุกุฉ ุงูุฐููุฉ:

```
๐ง [IF-ELSE Block Tree]
IF (light_level < 30% AND motion_detected)
โโโ ๐ก turn ON lights
โโโ ๐บ display "Lights ON - Motion detected"
ELSE IF (light_level > 70%)  
โโโ ๐ก turn OFF lights
โโโ ๐บ display "Lights OFF - Bright enough"
ELSE
โโโ ๐ก keep current state
โโโ ๐บ display "Standby mode"
```

##### ุจ) ููุทู ุงูุชุญูู ูู ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ:

```
๐ temperature = read DHT22 sensor

๐ง [IF-ELSE Block Tree]
IF (temperature > 28ยฐC)
โโโ ๐ turn ON fan
โโโ ๐บ display "Cooling activated"
ELSE IF (temperature < 18ยฐC)
โโโ ๐ turn OFF fan  
โโโ ๐บ display "Heating needed"
ELSE
โโโ ๐ turn OFF fan
โโโ ๐บ display "Temperature OK"
```

##### ุฌ) ูุธุงู ุงูุฃูุงู ูุงูุฅูุฐุงุฑ:

```
๐ง [IF Block] 
IF (motion_detected AND security_mode_ON)
โโโ ๐จ turn ON buzzer for 3 seconds
โโโ ๐ก blink LEDs 5 times
โโโ ๐บ display "ALERT! Motion detected"
โโโ ๐ฑ send notification (simulation)
```

### ๐ ุงููุฑุญูุฉ ุงูุฑุงุจุนุฉ: ุงููุญุงูุงุฉ ูุงูุงุฎุชุจุงุฑ

#### ๐ฎ ุชุดุบูู ุงููุญุงูุงุฉ:

1. **ุงุถุบุท ุนูู ุฒุฑ "Start Simulation"** โถ๏ธ
2. **ุชูุงุนู ูุน ุงูุญุณุงุณุงุช:**
   - ุงุถุบุท ุนูู PIR sensors ููุญุงูุงุฉ ุงูุญุฑูุฉ
   - ุงุถุบุท ุนูู LDRs ูุชุบููุฑ ูุณุชูู ุงูุถูุก
   - ุงุณุชุฎุฏู ุดุฑูุท ุงูุชูุฑูุฑ ููู DHT22 ูุชุบููุฑ ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ

3. **ูุฑุงูุจุฉ ุงููุชุงุฆุฌ:**
   - ุฑุงูุจ ุฅุถุงุกุฉ ูุฅุทูุงุก LEDs
   - ุงุณุชูุน ูุตูุช Buzzer ุนูุฏ ุงูุชูุจูู
   - ุฑุงูุจ ุญุฑูุฉ Fan ุนูุฏ ุชุดุบูู ุงูุชุจุฑูุฏ

#### ๐ ุงุฎุชุจุงุฑ ูุฅุตูุงุญ ุงูุฃุฎุทุงุก:

##### โ ุงุฎุชุจุงุฑุงุช ุฃุณุงุณูุฉ:
- **ุงุฎุชุจุงุฑ ุงูุฅุถุงุกุฉ**: ุญุฑู PIR โ LED ูุฌุจ ุฃู ูุถูุก
- **ุงุฎุชุจุงุฑ ุงูุญุฑุงุฑุฉ**: ุบูุฑ ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ โ Fan ูุฌุจ ุฃู ูุนูู/ูุชููู
- **ุงุฎุชุจุงุฑ ุงูุฃูุงู**: ุญุฑู PIR ูุน ุชูุนูู ุงูุฃูุงู โ Buzzer ูุตุฏุฑ ุตูุช

##### ๐ง ุญู ุงููุดุงูู ุงูุดุงุฆุนุฉ:
1. **LED ูุง ูุถูุก**: ุชุญูู ูู ุชูุตูู ุงูููุงููุฉ ูุงููุทุจูุฉ
2. **PIR ูุง ูุณุชุฌูุจ**: ุชุญูู ูู ุชูุตูู VCC ูGND
3. **Buzzer ูุง ูุตุฏุฑ ุตูุช**: ุชุญูู ูู ุงููุทุจูุฉ ูุงูุชูุตูู

### ๐ค ุงููุฑุญูุฉ ุงูุฎุงูุณุฉ: ุชุตุฏูุฑ ุงูููุฏ

#### ๐ ูู ุงูุจูููุงุช ุฅูู ููุฏ Arduino:

1. **ุนุฑุถ ุงูููุฏ ุงูููููุฏ ุชููุงุฆูุงู:**
   - ุงุถุบุท ุนูู "Blocks + Text" ูู ุฃุนูู ูููู ูุงูุฐุฉ ุงูููุฏ
   - ุงุฎุชุฑ "Text" ูุฑุคูุฉ ููุฏ Arduino C++

2. **ูุณุฎ ุงูููุฏ ุงูุฃุณุงุณู:**
```cpp
// ุงูููุฏ ุงูููููุฏ ูู Tinkercad
void setup() {
  Serial.begin(9600);
  pinMode(8, OUTPUT);  // LED 1
  pinMode(9, OUTPUT);  // LED 2
  pinMode(10, OUTPUT); // Buzzer
  pinMode(11, OUTPUT); // Fan
  pinMode(2, INPUT);   // PIR 1
  pinMode(3, INPUT);   // PIR 2
  Serial.println("Smart Home Started!");
}

void loop() {
  int motion1 = digitalRead(2);
  int motion2 = digitalRead(3);
  int light1 = analogRead(A0);
  int light2 = analogRead(A1);
  
  // ููุทู ุงูุฅุถุงุกุฉ
  if (motion1 == HIGH && light1 < 500) {
    digitalWrite(8, HIGH);
  } else {
    digitalWrite(8, LOW);
  }
  
  if (motion2 == HIGH && light2 < 500) {
    digitalWrite(9, HIGH);  
  } else {
    digitalWrite(9, LOW);
  }
  
  delay(1000);
}
```

3. **ุญูุธ ูุชุตุฏูุฑ ุงููุดุฑูุน:**
   - ุงุถุบุท ุนูู ุงุณู ุงููุดุฑูุน ุฃุนูู ุงูุดุงุดุฉ
   - ุงุฎุชุฑ "Download for Arduino IDE"
   - ุงุญูุธ ุงูููู ูุงุณุชุฎุฏุงูู ูุน ESP32 ูุงุญูุงู

### ๐ ูุตุงุฆุญ ูููุฉ ููุชุทุจูู ูู Tinkercad:

#### โ ุฃูุถู ุงูููุงุฑุณุงุช:
1. **ุงุจุฏุฃ ุจุณูุท**: ุงุฎุชุจุฑ ูู ุญุณุงุณ ูููุฑุฏุงู ุฃููุงู
2. **ุงุณุชุฎุฏู Serial Monitor**: ููุฑุงูุจุฉ ููู ุงูุญุณุงุณุงุช
3. **ุงุฎุชุจุฑ ุฎุทูุฉ ุจุฎุทูุฉ**: ุฃุถู ูููู ูุงุญุฏ ูู ูู ูุฑุฉ
4. **ุงุณุชุฎุฏู ุงูุชุนูููุงุช**: ุงูุชุจ ููุงุญุธุงุช ูู ุงูููุฏ

#### ๐ซ ุฃุฎุทุงุก ุดุงุฆุนุฉ ูุฌุจ ุชุฌูุจูุง:
1. **ุนุฏู ุงุณุชุฎุฏุงู ููุงููุงุช Pull-up/Pull-down**
2. **ุชูุตูู VCC ูุน GND (ุฏุงุฆุฑุฉ ูุตูุฑุฉ)**  
3. **ุชุฌุงูู ูุทุจูุฉ LEDs ูุงูุจุทุงุฑูุงุช**
4. **ุงุณุชุฎุฏุงู ุฃุฑูุงู pins ุฎุงุทุฆุฉ ูู ุงูููุฏ**

#### ๐ง ุฃุฏูุงุช ูุณุงุนุฏุฉ ูู Tinkercad:
- **Multimeter**: ูููุงุณ ุงูุฌูุฏ ูุงูุชูุงุฑ
- **Oscilloscope**: ููุฑุงูุจุฉ ุงูุฅุดุงุฑุงุช ุงูุฑูููุฉ
- **Function Generator**: ูุชูููุฏ ุฅุดุงุฑุงุช ุงุฎุชุจุงุฑ

### ๐ ุงูุงูุชูุงู ุฅูู ุงููุณุชูู ุงูุชุงูู:

ุจุนุฏ ุฅุชูุงู ุงูุฃุณุงุณูุงุช ูู Tinkercadุ ุณุชููู ุฌุงูุฒุงู ููุงูุชูุงู ุฅูู:
1. **Arduino IDE**: ูุจุฑูุฌุฉ ุฃูุซุฑ ุชูุฏูุงู
2. **ESP32**: ูุฅุถุงูุฉ WiFi ูุงูููุฒุงุช ุงููุชูุฏูุฉ  
3. **ุฃุฌูุฒุฉ ุญููููุฉ**: ููุชุทุจูู ุงูุนููู ุงูููุงุฆู

### โ๏ธ ุฅุถุงูุฉ ูุธุงู ุงูุทุงูุฉ ุงูุดูุณูุฉ ูู Tinkercad

#### ๐ ุงููุฑุญูุฉ ุงููุชูุฏูุฉ: ุชุตููู ูุธุงู ุงูุทุงูุฉ ุงูุจุฏููุฉ

ูุฃู Tinkercad ูุง ูุญุชูู ุนูู ููููุงุช ุทุงูุฉ ุดูุณูุฉ ุฌุงูุฒุฉุ ุณููุญุงูู ุงููุธุงู ุจุทุฑููุฉ ุฐููุฉ:

#### 1. ูุญุงูุงุฉ ุงูููุญ ุงูุดูุณู ๐

```
ููููุงุช ุงููุญุงูุงุฉ:
- 1x Potentiometer (ููุญุงูุงุฉ ูููุฉ ุงูุถูุก)
- 1x Voltage Divider Circuit
- 1x LED (ูุคุดุฑ ุงูุทุงูุฉ ุงูุดูุณูุฉ)

ุงูุชูุตูู:
Potentiometer (ูุญุงูุงุฉ ุงูููุญ ุงูุดูุณู):
- ุงูุทุฑู ุงูุฃูู โ 5V
- ุงูุทุฑู ุงูุซุงูุซ โ GND  
- ุงูุทุฑู ุงูุฃูุณุท โ Pin A2 (ูุฑุงุกุฉ "ุงูุทุงูุฉ ุงูุดูุณูุฉ")
```

#### 2. ูุญุงูุงุฉ ุงูุจุทุงุฑูุฉ ูุงูุดุญู ๐

```
ููููุงุช ุฅุถุงููุฉ:
- 1x Potentiometer (ููุญุงูุงุฉ ูุณุชูู ุงูุจุทุงุฑูุฉ)
- 3x LEDs (ูุคุดุฑุงุช ุงูุจุทุงุฑูุฉ: ุฃุฎุถุฑุ ุฃุตูุฑุ ุฃุญูุฑ)
- 3x 220ฮฉ Resistors

ุงูุชูุตูู:
Battery Level Potentiometer:
- ุงูุทุฑู ุงูุฃูู โ 5V
- ุงูุทุฑู ุงูุซุงูุซ โ GND
- ุงูุทุฑู ุงูุฃูุณุท โ Pin A3 (ูุฑุงุกุฉ ูุณุชูู ุงูุจุทุงุฑูุฉ)

ูุคุดุฑุงุช ุงูุจุทุงุฑูุฉ:
- LED ุฃุฎุถุฑ โ Pin 5 (ุจุทุงุฑูุฉ ุฌูุฏุฉ)
- LED ุฃุตูุฑ โ Pin 6 (ุจุทุงุฑูุฉ ูุชูุณุทุฉ)  
- LED ุฃุญูุฑ โ Pin 7 (ุจุทุงุฑูุฉ ููุฎูุถุฉ)
```

#### 3. ุงูุจูููุงุช ููุทุงูุฉ ุงูุดูุณูุฉ โก

```
๐ฆ [Setup Block - ุฅุถุงูุฉ ููุทุงูุฉ]
โโโ ๐ง set Green LED pin 5 to OUTPUT    // ูุคุดุฑ ุจุทุงุฑูุฉ ุฌูุฏุฉ
โโโ ๐ง set Yellow LED pin 6 to OUTPUT   // ูุคุดุฑ ุจุทุงุฑูุฉ ูุชูุณุทุฉ
โโโ ๐ง set Red LED pin 7 to OUTPUT      // ูุคุดุฑ ุจุทุงุฑูุฉ ููุฎูุถุฉ
โโโ ๐บ print "Solar Power System Ready!" to Serial Monitor

๐ฉ [Forever Loop Block - ุฅุถุงูุฉ ุงูุทุงูุฉ]
โโโ ๐ read analog pin A2 โ store in "solar_power"
โโโ ๐ read analog pin A3 โ store in "battery_level"
โโโ ๐งฎ convert solar_power to percentage โ "solar_percent"
โโโ ๐งฎ convert battery_level to percentage โ "battery_percent"
โโโ 
โโโ ๐ง [IF Block] battery_percent > 70
โ   โโโ ๐ก turn ON Green LED (pin 5)
โ   โโโ ๐ก turn OFF Yellow LED (pin 6)  
โ   โโโ ๐ก turn OFF Red LED (pin 7)
โ   โโโ ๐บ display "Battery: GOOD"
โโโ 
โโโ ๐ง [ELSE IF Block] battery_percent > 30
โ   โโโ ๐ก turn OFF Green LED (pin 5)
โ   โโโ ๐ก turn ON Yellow LED (pin 6)
โ   โโโ ๐ก turn OFF Red LED (pin 7)
โ   โโโ ๐บ display "Battery: MEDIUM" 
โโโ
โโโ ๐ง [ELSE Block] battery_percent <= 30
โ   โโโ ๐ก turn OFF Green LED (pin 5)
โ   โโโ ๐ก turn OFF Yellow LED (pin 6)
โ   โโโ ๐ก turn ON Red LED (pin 7)
โ   โโโ ๐บ display "Battery: LOW!"
โโโ
โโโ ๐ง [IF Block] solar_percent > 50
    โโโ ๐บ display "Solar charging active"
    โโโ ๐ก blink Green LED (simulate charging)
```

#### 4. ููุฏ ุงูุทุงูุฉ ุงูุดูุณูุฉ ุงูููููุฏ ๐

```cpp
// ุฅุถุงูุงุช ููููุฏ ุงูุฃุณุงุณู
void setup() {
  Serial.begin(9600);
  
  // ุฅุนุฏุงุฏ ุฃุทุฑุงู ุงูุทุงูุฉ ุงูุดูุณูุฉ
  pinMode(5, OUTPUT);  // LED ุฃุฎุถุฑ - ุจุทุงุฑูุฉ ุฌูุฏุฉ
  pinMode(6, OUTPUT);  // LED ุฃุตูุฑ - ุจุทุงุฑูุฉ ูุชูุณุทุฉ  
  pinMode(7, OUTPUT);  // LED ุฃุญูุฑ - ุจุทุงุฑูุฉ ููุฎูุถุฉ
  
  Serial.println("Smart Home with Solar Power Started!");
}

void loop() {
  // ูุฑุงุกุฉ ุงูุญุณุงุณุงุช ุงูุฃุณุงุณูุฉ
  int motion1 = digitalRead(2);
  int motion2 = digitalRead(3);
  int light1 = analogRead(A0);
  int light2 = analogRead(A1);
  
  // ูุฑุงุกุฉ ูุธุงู ุงูุทุงูุฉ ุงูุดูุณูุฉ
  int solar_power = analogRead(A2);      // ูุญุงูุงุฉ ุงูููุญ ุงูุดูุณู
  int battery_level = analogRead(A3);    // ูุญุงูุงุฉ ูุณุชูู ุงูุจุทุงุฑูุฉ
  
  // ุชุญููู ุฅูู ูุณุจ ูุฆููุฉ
  int solar_percent = map(solar_power, 0, 1023, 0, 100);
  int battery_percent = map(battery_level, 0, 1023, 0, 100);
  
  // ุฅุฏุงุฑุฉ ูุคุดุฑุงุช ุงูุจุทุงุฑูุฉ
  manageBatteryIndicators(battery_percent);
  
  // ุฅุฏุงุฑุฉ ุงูุทุงูุฉ ุงูุฐููุฉ
  smartPowerManagement(battery_percent, solar_percent);
  
  // ุนุฑุถ ูุนูููุงุช ุงูุทุงูุฉ
  displayPowerInfo(battery_percent, solar_percent);
  
  delay(1000);
}

void manageBatteryIndicators(int battery_percent) {
  // ุฅุทูุงุก ุฌููุน ุงููุคุดุฑุงุช ุฃููุงู
  digitalWrite(5, LOW);
  digitalWrite(6, LOW);  
  digitalWrite(7, LOW);
  
  if (battery_percent > 70) {
    digitalWrite(5, HIGH);  // LED ุฃุฎุถุฑ
  } else if (battery_percent > 30) {
    digitalWrite(6, HIGH);  // LED ุฃุตูุฑ
  } else {
    digitalWrite(7, HIGH);  // LED ุฃุญูุฑ
  }
}

void smartPowerManagement(int battery_percent, int solar_percent) {
  // ูู ุญุงูุฉ ุงูุจุทุงุฑูุฉ ุงูููุฎูุถุฉ
  if (battery_percent < 30) {
    Serial.println("โ๏ธ ูุถุน ุชูููุฑ ุงูุทุงูุฉ ูููุนู");
    
    // ุฅุทูุงุก ุงูุฅุถุงุกุฉ ุบูุฑ ุงูุถุฑูุฑูุฉ
    if (digitalRead(2) == LOW) {  // ูุง ุชูุฌุฏ ุญุฑูุฉ
      digitalWrite(8, LOW);       // ุฅุทูุงุก LED 1
    }
    if (digitalRead(3) == LOW) {  // ูุง ุชูุฌุฏ ุญุฑูุฉ
      digitalWrite(9, LOW);       // ุฅุทูุงุก LED 2  
    }
  }
  
  // ูู ุญุงูุฉ ุงูุดุญู ุงูุดูุณู ุงููุดุท
  if (solar_percent > 50) {
    Serial.println("โ๏ธ ุงูุดุญู ุงูุดูุณู ูุดุท");
    
    // ูุญุงูุงุฉ ุงูุดุญู ุจุฑูุด LED ุฃุฎุถุฑ
    static unsigned long lastBlink = 0;
    if (millis() - lastBlink > 500) {
      lastBlink = millis();
      digitalWrite(5, !digitalRead(5));
    }
  }
}

void displayPowerInfo(int battery_percent, int solar_percent) {
  Serial.print("๐ ุงูุจุทุงุฑูุฉ: ");
  Serial.print(battery_percent);
  Serial.print("% | โ๏ธ ุงูุทุงูุฉ ุงูุดูุณูุฉ: ");
  Serial.print(solar_percent);
  Serial.println("%");
}
```

#### 5. ุชุฌุงุฑุจ ูุชูุฏูุฉ ูู Tinkercad ๐งช

##### ุชุฌุฑุจุฉ 1: ุณููุงุฑูู ููู ูุดูุณ
```
ุงูุฎุทูุงุช:
1. ุงุฑูุน ูููุฉ Potentiometer ุงูุทุงูุฉ ุงูุดูุณูุฉ ุฅูู 80%
2. ุงุจุฏุฃ ุจูุณุชูู ุจุทุงุฑูุฉ ููุฎูุถ (30%)
3. ุฑุงูุจ ููู ูุชู "ุดุญู" ุงูุจุทุงุฑูุฉ ุชุฏุฑูุฌูุงู
4. ูุงุญุธ ุชุบูุฑ ูุคุดุฑุงุช LED ูู ุฃุญูุฑ ุฅูู ุฃุตูุฑ ุฅูู ุฃุฎุถุฑ
```

##### ุชุฌุฑุจุฉ 2: ุณููุงุฑูู ููู ุบุงุฆู
```
ุงูุฎุทูุงุช:  
1. ุงุฎูุถ ูููุฉ Potentiometer ุงูุทุงูุฉ ุงูุดูุณูุฉ ุฅูู 20%
2. ุงุจุฏุฃ ุจูุณุชูู ุจุทุงุฑูุฉ ุนุงูู (80%)
3. ุฑุงูุจ ููู ุชูุฎูุถ ุงูุจุทุงุฑูุฉ ุชุฏุฑูุฌูุงู
4. ูุงุญุธ ุชูุนูู ูุถุน ุชูููุฑ ุงูุทุงูุฉ ุนูุฏ ุงููุตูู ูู 30%
```

##### ุชุฌุฑุจุฉ 3: ุฅุฏุงุฑุฉ ุงูุทูุงุฑุฆ
```
ุงูุฎุทูุงุช:
1. ุงุฌุนู ุงูุทุงูุฉ ุงูุดูุณูุฉ = 0% (ููู)
2. ุงุฎูุถ ุงูุจุทุงุฑูุฉ ุฅูู ุฃูู ูู 20%
3. ุญุฑู PIR sensors ููุญุงูุงุฉ ุงูุญุฑูุฉ
4. ุฑุงูุจ ููู ูุนุทู ุงููุธุงู ุฃููููุฉ ููุฃูุงู ุฑุบู ููุฉ ุงูุทุงูุฉ
```

#### 6. ูุงุฆูุฉ ูุญุต ููุชุทุจูู ุงููุงูู โ

##### ุงูููููุงุช ุงูุฃุณุงุณูุฉ:
- [ ] Arduino Uno R3
- [ ] 2x PIR Motion Sensors  
- [ ] 2x Photoresistors (LDR)
- [ ] 1x DHT22 (ุฃู DHT11)
- [ ] 2x LEDs ููุฅุถุงุกุฉ
- [ ] 1x Buzzer
- [ ] 1x Fan Motor
- [ ] 1x LCD 16x2

##### ููููุงุช ุงูุทุงูุฉ ุงูุดูุณูุฉ:
- [ ] 2x Potentiometers (ูุญุงูุงุฉ)
- [ ] 3x LEDs ูููุคุดุฑุงุช
- [ ] ููุงููุงุช ูุฎุชููุฉ
- [ ] ุฃุณูุงู ุชูุตูู ูุงููุฉ

##### ุงุฎุชุจุงุฑุงุช ูุธูููุฉ:
- [ ] ุฅุถุงุกุฉ ุชููุงุฆูุฉ ูุน ุงูุญุฑูุฉ
- [ ] ุชุญูู ูู ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ
- [ ] ูุธุงู ุฃูุงู ุจุงูุฅูุฐุงุฑ
- [ ] ูุคุดุฑุงุช ุงูุจุทุงุฑูุฉ ุชุนูู
- [ ] ูุถุน ุชูููุฑ ุงูุทุงูุฉ ูุชูุนู
- [ ] ูุญุงูุงุฉ ุงูุดุญู ุงูุดูุณู

### ๐ ูุตุงุฏุฑ ุฅุถุงููุฉ ููุชุนูู:

1. **ููุงุฉ Tinkercad ุงูุฑุณููุฉ**: [youtube.com/tinkercad](https://youtube.com/tinkercad)
2. **ุฏุฑูุณ Arduino**: [arduino.cc/en/Tutorial](https://arduino.cc/en/Tutorial)  
3. **ูุดุงุฑูุน IoT**: [hackster.io](https://hackster.io)

---

## ูููู ุงูุจุฑูุงูุฌ ุงูุนุงู ูุน ูุธุงู ุงูุทุงูุฉ ุงูุดูุณูุฉ ๐โ๏ธ

### ูุธุฑุฉ ุดุงููุฉ ุนูู ููุทู ุงูุชุดุบูู ุงููุญุฏุซ ๐

```mermaid
flowchart TD
    A[๐ ุจุฏุงูุฉ ุงูุจุฑูุงูุฌ] --> B[โ๏ธ ุฅุนุฏุงุฏ ุงููุธุงู]
    B --> C[๐ ุชููุฆุฉ ุงูููุงูุฐ ูุงูุญุณุงุณุงุช]
    C --> D[โ๏ธ ุชููุฆุฉ ูุธุงู ุงูุทุงูุฉ ุงูุดูุณูุฉ]
    D --> E[๐ ูุญุต ูุณุชูู ุงูุจุทุงุฑูุงุช]
    E --> F[๐ก ุงูุงุชุตุงู ุจุงูุดุจูุฉ ุงููุงุณูููุฉ]
    F --> G[๐บ ุนุฑุถ ุฑุณุงูุฉ ุงูุชุฑุญูุจ]
    G --> H[๐ ุจุฏุงูุฉ ุงูุญููุฉ ุงูุฑุฆูุณูุฉ]
    
    H --> I[๐ ูุฑุงุกุฉ ุฌููุน ุงูุญุณุงุณุงุช]
    I --> J[โก ูุฑุงูุจุฉ ูุธุงู ุงูุทุงูุฉ]
    J --> K{๐ ุงูุจุทุงุฑูุฉ ููุฎูุถุฉุ}
    K -->|ูุนู| L[๐ค ูุถุน ุชูููุฑ ุงูุทุงูุฉ]
    K -->|ูุง| M[๐ ุชุดุบูู ุนุงุฏู]
    
    L --> N[๐ด ุชูููู ุงูุฃูุธูุฉ ุบูุฑ ุงูุถุฑูุฑูุฉ]
    M --> O{๐ก๏ธ ูุญุต ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ}
    N --> O
    
    O -->|ุญุงุฑ ุฌุฏุงู| P[โ๏ธ ุชุดุบูู ุงูุชูููู]
    O -->|ุจุงุฑุฏ ุฌุฏุงู| Q[๐ฅ ุชุดุบูู ุงูุชุฏูุฆุฉ]
    O -->|ููุงุณุจุฉ| R[โธ๏ธ ุฅููุงู ุงูุชูููู]
    
    P --> S{๐ก ูุญุต ุงูุฅุถุงุกุฉ}
    Q --> S
    R --> S
    
    S -->|ูุธูู| T[๐ก ุชุดุบูู ุงูุฃุถูุงุก]
    S -->|ูุถูุก| U[๐ ุฅุทูุงุก ุงูุฃุถูุงุก]
    
    T --> V{๐ฅ ูุญุต ุงูุญุฑูุฉ}
    U --> V
    
    V -->|ุญุฑูุฉ ููุชุดูุฉ| W[๐จ ุชูุดูุท ูุธุงู ุงูุฃูุงู]
    V -->|ูุง ุชูุฌุฏ ุญุฑูุฉ| X[๐ด ูุถุน ุงูููู]
    
    W --> Y{๐จ ูุญุต ุงูุบุงุฒ}
    X --> Y
    
    Y -->|ุบุงุฒ ููุชุดู| Z[๐จ ุฅูุฐุงุฑ ุทูุงุฑุฆ]
    Y -->|ุขูู| AA[๐บ ุชุญุฏูุซ ุงูุดุงุดุฉ]
    
    Z --> BB[๐ฑ ุฅุฑุณุงู ุชูุจูู]
    AA --> CC[โ๏ธ ุชุญุฏูุซ ุญุงูุฉ ุงูุทุงูุฉ ุงูุดูุณูุฉ]
    BB --> CC
    
    CC --> DD[โฐ ุงูุชุธุงุฑ ุซุงููุฉ ูุงุญุฏุฉ]
    DD --> H
```

## ุชูุตูู ูุฑุงุญู ุงูุจุฑูุงูุฌ ุงููุญุฏุซ ๐

### ุงููุฑุญูุฉ 1: ุฅุนุฏุงุฏ ุงููุธุงู ูุน ุงูุทุงูุฉ ุงูุดูุณูุฉ (Setup Phase) โ๏ธโ๏ธ

```cpp
void setup() {
    // 1. ุชููุฆุฉ ุงูุชูุงุตู ุงูุชุณูุณูู
    Serial.begin(115200);
    Serial.println("๐โ๏ธ ูุฑุญุจุงู ุจูู ูู ุงูุจูุช ุงูุฐูู ุงูุจูุฆู!");
    
    // 2. ุฅุนุฏุงุฏ ููุงูุฐ ุงูุฅุฏุฎุงู
    pinMode(PIR_PIN_1, INPUT);      // ุญุณุงุณ ุงูุญุฑูุฉ 1
    pinMode(PIR_PIN_2, INPUT);      // ุญุณุงุณ ุงูุญุฑูุฉ 2
    pinMode(LDR_PIN_1, INPUT);      // ุญุณุงุณ ุงูุถูุก 1
    pinMode(LDR_PIN_2, INPUT);      // ุญุณุงุณ ุงูุถูุก 2
    pinMode(GAS_PIN, INPUT);        // ุญุณุงุณ ุงูุบุงุฒ
    pinMode(VOLTAGE_SENSOR_PIN, INPUT); // ุญุณุงุณ ูุณุชูู ุงูุจุทุงุฑูุฉ
    
    // 3. ุฅุนุฏุงุฏ ููุงูุฐ ุงูุฅุฎุฑุงุฌ
    pinMode(LED_PIN_1, OUTPUT);     // ูุตุจุงุญ 1
    pinMode(LED_PIN_2, OUTPUT);     // ูุตุจุงุญ 2
    pinMode(BUZZER_PIN, OUTPUT);    // ุฌูุงุฒ ุงูุฅูุฐุงุฑ
    pinMode(FAN_PIN, OUTPUT);       // ุงููุฑูุญุฉ
    
    // 4. ุฅุนุฏุงุฏ ูุคุดุฑุงุช ูุธุงู ุงูุทุงูุฉ ุงูุดูุณูุฉ
    pinMode(SOLAR_LED_PIN, OUTPUT);    // ูุคุดุฑ ุงูุทุงูุฉ ุงูุดูุณูุฉ
    pinMode(BATTERY_LED_PIN, OUTPUT);  // ูุคุดุฑ ุงูุจุทุงุฑูุฉ ุงูููุฎูุถุฉ
    pinMode(SYSTEM_LED_PIN, OUTPUT);   // ูุคุดุฑ ุญุงูุฉ ุงููุธุงู
    
    // 5. ุชููุฆุฉ ุงูุญุณุงุณุงุช
    dht.begin();                    // ุญุณุงุณ ุงูุญุฑุงุฑุฉ
    lcd.init();                     // ุงูุดุงุดุฉ
    servo1.attach(SERVO_PIN_1);     // ูุญุฑู 1
    servo2.attach(SERVO_PIN_2);     // ูุญุฑู 2
    
    // 6. ุชููุฆุฉ ูุธุงู ุงูุทุงูุฉ ุงูุดูุณูุฉ
    initializePowerSystem();
    
    // 7. ุงูุงุชุตุงู ุจุงููุงู ูุงู
    connectToWiFi();
    
    // 8. ุงุฎุชุจุงุฑ ุฌููุน ุงูููููุงุช
    testAllComponents();
    
    Serial.println("โ ุชู ุชุดุบูู ุงููุธุงู ุจูุฌุงุญ ูุน ุงูุทุงูุฉ ุงูุดูุณูุฉ!");
}
```

### ุงููุฑุญูุฉ 2: ุงูุญููุฉ ุงูุฑุฆูุณูุฉ ุงููุญุฏุซุฉ (Main Loop) ๐

```cpp
void loop() {
    // ูุฑุงุกุฉ ุฌููุน ุงูุญุณุงุณุงุช
    readAllSensors();
    
    // ูุฑุงูุจุฉ ูุฅุฏุงุฑุฉ ูุธุงู ุงูุทุงูุฉ ุงูุดูุณูุฉ (ุฃููููุฉ ุนููุง)
    readBatteryStatus();
    processPowerManagement();
    
    // ุชุญููู ุงูุจูุงูุงุช ูุงุชุฎุงุฐ ุงููุฑุงุฑุงุช
    processTemperatureControl();
    processLightingControl();
    processSecuritySystem();
    processGasDetection();
    
    // ุชุญุฏูุซ ุงููุนูููุงุช ุงููุนุฑูุถุฉ
    updateDisplay();
    
    // ุฅุฑุณุงู ุงูุจูุงูุงุช ุนุจุฑ ุงูุดุจูุฉ
    sendDataToCloud();
    
    // ุชุณุฌูู ุจูุงูุงุช ุงูุทุงูุฉ ุงูุดูุณูุฉ
    solarDataLogging();
    
    // ุงูุชุธุงุฑ ูุจู ุงููุฑุงุกุฉ ุงูุชุงููุฉ
    delay(1000);
}
```

## ุฎูุงุฑุฒููุงุช ุงูุฃูุธูุฉ ุงููุฑุนูุฉ ุงููุญุฏุซุฉ ๐ง

### 1. ูุธุงู ุงูุทุงูุฉ ุงูุดูุณูุฉ ูุฅุฏุงุฑุฉ ุงูุจุทุงุฑูุงุช โ๏ธ๐

```mermaid
flowchart TD
    A[โ๏ธ ุจุฏุงูุฉ ูุฑุงูุจุฉ ุงูุทุงูุฉ] --> B[๐ ูุฑุงุกุฉ ุฌูุฏ ุงูุจุทุงุฑูุฉ]
    B --> C[๐ ุญุณุงุจ ูุณุจุฉ ุงูุดุญู]
    C --> D{โ๏ธ ูู ููุฌุฏ ุถูุก ุดูุณุ}
    D -->|ูุนู| E[๐ข ุชูุนูู ุงูุดุญู ุงูุดูุณู]
    D -->|ูุง| F[๐ต ุงูุชุดุบูู ุจุงูุจุทุงุฑูุฉ]
    
    E --> G[๐ก ุฅุถุงุกุฉ LED ุฃุฎุถุฑ]
    F --> H{๐ ูุณุชูู ุงูุจุทุงุฑูุฉุ}
    
    H -->|>50%| I[๐ต LED ุฃุฒุฑู - ุชุดุบูู ุนุงุฏู]
    H -->|20-50%| J[๐ก ุชุญุฐูุฑ ุชูููุฑ ุงูุทุงูุฉ]
    H -->|<20%| K[๐ด LED ุฃุญูุฑ - ุทุงูุฉ ููุฎูุถุฉ]
    
    G --> L[๐ ุชุณุฌูู ุญุงูุฉ ุงูุดุญู]
    I --> L
    J --> M[โก ุชูููู ุงุณุชููุงู ุงูุทุงูุฉ]
    K --> N[๐จ ูุถุน ุงูุทูุงุฑุฆ ุงูุทุงูุฉ]
    
    M --> L
    N --> O[๐ด ุฅููุงู ุงูุฃูุธูุฉ ุบูุฑ ุงูุญูููุฉ]
    O --> L
    
    L --> P[๐บ ุนุฑุถ ูุนูููุงุช ุงูุทุงูุฉ]
    P --> Q[โฐ ุงูุชุธุงุฑ ูุจู ุงููุฑุงุกุฉ ุงูุชุงููุฉ]
    Q --> A
```

**ุงูููุฏ ุงูููุงุจู:**
```cpp
void processPowerManagement() {
    // ูุฑุงุกุฉ ุฌูุฏ ุงูุจุทุงุฑูุฉ
    readBatteryStatus();
    
    // ุฅุฏุงุฑุฉ ูุคุดุฑุงุช LED ููุทุงูุฉ
    if (homeStatus.solarCharging) {
        // ุงูุทุงูุฉ ุงูุดูุณูุฉ ูุชููุฑุฉ - LED ุฃุฎุถุฑ
        digitalWrite(SOLAR_LED_PIN, HIGH);
        digitalWrite(BATTERY_LED_PIN, LOW);
        digitalWrite(SYSTEM_LED_PIN, LOW);
        homeStatus.powerSource = "ุดูุณู";
        
    } else if (homeStatus.batteryPercentage > 20) {
        // ูุนูู ุจุงูุจุทุงุฑูุฉ - LED ุฃุฒุฑู
        digitalWrite(SYSTEM_LED_PIN, HIGH);
        digitalWrite(BATTERY_LED_PIN, LOW);
        digitalWrite(SOLAR_LED_PIN, LOW);
        homeStatus.powerSource = "ุจุทุงุฑูุฉ";
        
    } else {
        // ุจุทุงุฑูุฉ ููุฎูุถุฉ - LED ุฃุญูุฑ ูุฑูุด
        static unsigned long lastBlink = 0;
        if (millis() - lastBlink > 500) {
            lastBlink = millis();
            digitalWrite(BATTERY_LED_PIN, !digitalRead(BATTERY_LED_PIN));
        }
        digitalWrite(SOLAR_LED_PIN, LOW);
        digitalWrite(SYSTEM_LED_PIN, LOW);
        homeStatus.powerSource = "ุทูุงุฑุฆ";
    }
    
    // ุชูุนูู ูุถุน ุชูููุฑ ุงูุทุงูุฉ ุนูุฏ ุงูุญุงุฌุฉ
    if (homeStatus.lowBattery) {
        energySavingMode();
    }
}

void readBatteryStatus() {
    // ูุฑุงุกุฉ ุฌูุฏ ุงูุจุทุงุฑูุฉ ุนุจุฑ ููุณู ุงูุฌูุฏ
    int voltageReading = analogRead(VOLTAGE_SENSOR_PIN);
    homeStatus.batteryVoltage = (voltageReading * 3.3 / 4095) * 2.0;
    
    // ุญุณุงุจ ูุณุจุฉ ุงูุดุญู (16.8V = 100%, 12.4V = 0%)
    homeStatus.batteryPercentage = map(homeStatus.batteryVoltage * 100, 1240, 1680, 0, 100);
    homeStatus.batteryPercentage = constrain(homeStatus.batteryPercentage, 0, 100);
    
    // ุชุญุฏูุฏ ุญุงูุฉ ุงูุจุทุงุฑูุฉ
    homeStatus.lowBattery = (homeStatus.batteryPercentage < 20);
    homeStatus.solarCharging = (homeStatus.batteryVoltage > 15.5);
}

void energySavingMode() {
    static bool energyModeActive = false;
    
    if (!energyModeActive) {
        energyModeActive = true;
        Serial.println("๐ ุชูุนูู ูุถุน ุชูููุฑ ุงูุทุงูุฉ!");
        
        // ุชูููู ุณุทูุน ุงูุฅุถุงุกุฉ ุฃู ุฅููุงููุง
        digitalWrite(LED_PIN_1, LOW);
        digitalWrite(LED_PIN_2, LOW);
        
        // ุฅููุงู ุงููุฑุงูุญ ุบูุฑ ุงูุถุฑูุฑูุฉ
        if (!homeStatus.gasAlert) {
            digitalWrite(FAN_PIN, LOW);
        }
    }
    
    // ุฅูุฐุงุฑ ุงูุจุทุงุฑูุฉ ุงูููุฎูุถุฉ
    static unsigned long lastWarning = 0;
    if (millis() - lastWarning > 30000) {
        lastWarning = millis();
        lowBatteryAlert();
    }
}
```

### 2. ูุธุงู ุงูุชุญูู ูู ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ูุน ุฅุฏุงุฑุฉ ุงูุทุงูุฉ ๐ก๏ธ

```mermaid
flowchart TD
    A[๐ ูุฑุงุกุฉ ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ] --> B{๐ ูุถุน ุชูููุฑ ุงูุทุงูุฉุ}
    B -->|ูุนู| C[โก ุชุญูู ูุญุฏูุฏ ุจุงูุทุงูุฉ]
    B -->|ูุง| D[๐ ุชุญูู ุนุงุฏู]
    
    C --> E{๐ก๏ธ ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ > 30ยฐCุ}
    D --> F{๐ก๏ธ ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ > 28ยฐCุ}
    
    E -->|ูุนู| G[โ๏ธ ุชุดุบูู ุชุจุฑูุฏ ุทูุงุฑุฆ ููุท]
    E -->|ูุง| H[โธ๏ธ ุนุฏู ุชุดุบูู ุงูุชุจุฑูุฏ]
    
    F -->|ูุนู| I[โ๏ธ ุชุดุบูู ุงูุชุจุฑูุฏ ุงููุงูู]
    F -->|ูุง| J{๐ก๏ธ ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ < 18ยฐCุ}
    
    J -->|ูุนู| K[๐ฅ ุชูุจูู ุงูุชุฏูุฆุฉ]
    J -->|ูุง| L[โ ุฏุฑุฌุฉ ุญุฑุงุฑุฉ ููุงุณุจุฉ]
    
    G --> M[๐บ ุนุฑุถ ุญุงูุฉ ุงูุชูููู ูุน ุงูุทุงูุฉ]
    H --> M
    I --> M
    K --> M
    L --> M
    
    M --> N[โฐ ุงูุชุธุงุฑ ุฏูููุฉ ูุงุญุฏุฉ]
```

**ุงูููุฏ ุงููุญุฏุซ:**
```cpp
void processTemperatureControl() {
    float temperature = dht.readTemperature();
    
    if (!isnan(temperature)) {
        // ูุญุต ูุถุน ุชูููุฑ ุงูุทุงูุฉ ุฃููุงู
        if (homeStatus.lowBattery) {
            // ูู ูุถุน ุชูููุฑ ุงูุทุงูุฉ - ุชุจุฑูุฏ ุทูุงุฑุฆ ููุท
            if (temperature > 30.0) {
                digitalWrite(FAN_PIN, HIGH);
                homeStatus.cooling = true;
                Serial.println("โ๏ธ ุชุจุฑูุฏ ุทูุงุฑุฆ - ุจุทุงุฑูุฉ ููุฎูุถุฉ");
            } else {
                digitalWrite(FAN_PIN, LOW);
                homeStatus.cooling = false;
            }
        } else {
            // ุชุดุบูู ุนุงุฏู
            if (temperature > TEMP_HIGH_THRESHOLD) {
                digitalWrite(FAN_PIN, HIGH);
                homeStatus.cooling = true;
                Serial.println("โ๏ธ ุชู ุชุดุบูู ุงูุชุจุฑูุฏ");
                
            } else if (temperature < TEMP_LOW_THRESHOLD) {
                digitalWrite(FAN_PIN, LOW);
                homeStatus.cooling = false;
                homeStatus.needHeating = true;
                Serial.println("๐ฅ ุงูุญุงุฌุฉ ุฅูู ุชุฏูุฆุฉ");
                
            } else {
                digitalWrite(FAN_PIN, LOW);
                homeStatus.cooling = false;
                homeStatus.needHeating = false;
                Serial.println("โ ุฏุฑุฌุฉ ุญุฑุงุฑุฉ ููุงุณุจุฉ");
            }
        }
        
        homeStatus.temperature = temperature;
    }
}
```

### 3. ูุธุงู ุงูุฅุถุงุกุฉ ุงูุฐููุฉ ูุน ููุงุกุฉ ุงูุทุงูุฉ ๐ก

```mermaid
flowchart TD
    A[๐ ูุฑุงุกุฉ ูุณุชูู ุงูุถูุก] --> B{๐ ูุถุน ุชูููุฑ ุงูุทุงูุฉุ}
    B -->|ูุนู| C[๐ก ุฅุถุงุกุฉ ูุญุฏูุฏุฉ ููุท]
    B -->|ูุง| D[๐ก ุฅุถุงุกุฉ ุนุงุฏูุฉ]
    
    C --> E{๐ก ุงูุถูุก < 15%ุ}
    D --> F{๐ก ุงูุถูุก < 30%ุ}
    
    E -->|ูุนู| G{๐ฅ ูู ููุฌุฏ ุญุฑูุฉุ}
    E -->|ูุง| H[๐ ุนุฏู ุชุดุบูู ุงูุฅุถุงุกุฉ]
    
    F -->|ูุนู| I{๐ฅ ูู ููุฌุฏ ุญุฑูุฉุ}
    F -->|ูุง| J[๐ ุฅุทูุงุก ุงูุฃุถูุงุก]
    
    G -->|ูุนู| K[๐ก ุฅุถุงุกุฉ ุทูุงุฑุฆ ููุท]
    G -->|ูุง| L[โฐ ุงูุชุธุงุฑ ุญุฑูุฉ]
    
    I -->|ูุนู| M[๐ก ุชุดุบูู ุงูุฅุถุงุกุฉ ุงููุงููุฉ]
    I -->|ูุง| N[โฐ ุงูุชุธุงุฑ ุญุฑูุฉ]
    
    H --> O[๐ ุชูููุฑ ุทุงูุฉ ูุตูู]
    J --> O
    K --> P[๐ ุชูููุฑ ุทุงูุฉ ูุชูุณุท]
    L --> P
    M --> Q[โก ุงุณุชููุงู ุทุงูุฉ ุนุงุฏู]
    N --> Q
    
    O --> R[๐บ ุชุญุฏูุซ ุญุงูุฉ ุงูุฅุถุงุกุฉ]
    P --> R
    Q --> R
```

**ุงูููุฏ ุงููุญุฏุซ:**
```cpp
void processLightingControl() {
    int lightLevel1 = analogRead(LDR_PIN_1);
    int lightLevel2 = analogRead(LDR_PIN_2);
    bool motion1 = digitalRead(PIR_PIN_1);
    bool motion2 = digitalRead(PIR_PIN_2);
    
    // ุชุญููู ุงููุฑุงุกุฉ ุฅูู ูุณุจุฉ ูุฆููุฉ
    int lightPercent1 = map(lightLevel1, 0, 4095, 0, 100);
    int lightPercent2 = map(lightLevel2, 0, 4095, 0, 100);
    
    // ุชุญุฏูุฏ ุนุชุจุฉ ุงูุฅุถุงุกุฉ ุญุณุจ ุญุงูุฉ ุงูุจุทุงุฑูุฉ
    int lightThreshold = homeStatus.lowBattery ? 15 : LIGHT_THRESHOLD;
    
    // ุบุฑูุฉ ุงููุนูุดุฉ
    if (homeStatus.lowBattery) {
        // ูู ูุถุน ุชูููุฑ ุงูุทุงูุฉ - ุฅุถุงุกุฉ ูุญุฏูุฏุฉ ููุท
        if (lightPercent1 < lightThreshold && motion1) {
            digitalWrite(LED_PIN_1, HIGH);
            homeStatus.light1 = true;
            Serial.println("๐ก ุฅุถุงุกุฉ ุทูุงุฑุฆ - ุบุฑูุฉ ุงููุนูุดุฉ");
        } else {
            digitalWrite(LED_PIN_1, LOW);
            homeStatus.light1 = false;
        }
    } else {
        // ุชุดุบูู ุนุงุฏู
        if (lightPercent1 < lightThreshold && motion1) {
            digitalWrite(LED_PIN_1, HIGH);
            homeStatus.light1 = true;
            Serial.println("๐ก ุชุดุบูู ุฅุถุงุกุฉ ุบุฑูุฉ ุงููุนูุดุฉ");
        } else {
            digitalWrite(LED_PIN_1, LOW);
            homeStatus.light1 = false;
        }
    }
    
    // ุงููุทุจุฎ (ููุณ ุงูููุทู)
    if (homeStatus.lowBattery) {
        if (lightPercent2 < lightThreshold && motion2) {
            digitalWrite(LED_PIN_2, HIGH);
            homeStatus.light2 = true;
            Serial.println("๐ก ุฅุถุงุกุฉ ุทูุงุฑุฆ - ุงููุทุจุฎ");
        } else {
            digitalWrite(LED_PIN_2, LOW);
            homeStatus.light2 = false;
        }
    } else {
        if (lightPercent2 < lightThreshold && motion2) {
            digitalWrite(LED_PIN_2, HIGH);
            homeStatus.light2 = true;
            Serial.println("๐ก ุชุดุบูู ุฅุถุงุกุฉ ุงููุทุจุฎ");
        } else {
            digitalWrite(LED_PIN_2, LOW);
            homeStatus.light2 = false;
        }
    }
    
    homeStatus.lightLevel1 = lightPercent1;
    homeStatus.lightLevel2 = lightPercent2;
}
```

### 4. ูุธุงู ุงูุฃูุงู ูุงููุฑุงูุจุฉ ๐

```mermaid
flowchart TD
    A[๐ฅ ูุญุต ุญุณุงุณุงุช ุงูุญุฑูุฉ] --> B{๐ ุงููุธุงู ููุนูุ}
    B -->|ูุง| C[๐ด ูุถุน ุงูุงุณุชุนุฏุงุฏ]
    B -->|ูุนู| D{๐ฅ ุญุฑูุฉ ููุชุดูุฉุ}
    D -->|ูุง| E[โ ุงูููุฒู ุขูู]
    D -->|ูุนู| F[โฐ ุชุณุฌูู ุงูููุช]
    F --> G{๐ ููุช ูุชููุนุ}
    G -->|ูุนู| H[๐ ุฏุฎูู ูุณููุญ]
    G -->|ูุง| I[๐จ ุฅูุฐุงุฑ ุฃููู]
    I --> J[๐ฑ ุฅุฑุณุงู ุชูุจูู]
    J --> K[๐ท ุชุณุฌูู ุงูุญุฏุซ]
    H --> L[๐ ุชุญุฏูุซ ุงูุณุฌู]
    K --> L
    E --> L
    C --> L
```

**ุงูููุฏ ุงูููุงุจู:**
```cpp
void processSecuritySystem() {
    bool motion1 = digitalRead(PIR_PIN_1);
    bool motion2 = digitalRead(PIR_PIN_2);
    
    if (securitySystem.enabled) {
        if (motion1 || motion2) {
            unsigned long currentTime = millis();
            
            // ูุญุต ุฅุฐุง ูุงู ุงูุชูุจูู ุงูุฃุฎูุฑ ููุฐ ุฃูุซุฑ ูู 30 ุซุงููุฉ
            if (currentTime - securitySystem.lastAlert > 30000) {
                securitySystem.lastAlert = currentTime;
                securitySystem.alertCount++;
                
                // ุชุดุบูู ุงูุฅูุฐุงุฑ
                activateAlarm();
                
                // ุฅุฑุณุงู ุชูุจูู
                sendSecurityAlert(motion1 ? "ุบุฑูุฉ ุงููุนูุดุฉ" : "ุงููุฏุฎู");
                
                Serial.println("๐จ ุชู ุงูุชุดุงู ุญุฑูุฉ ุบูุฑ ูุตุฑุญ ุจูุง!");
            }
        }
    }
    
    currentStatus.motion1 = motion1;
    currentStatus.motion2 = motion2;
}

void activateAlarm() {
    // ุชุดุบูู ุงูุฌุฑุณ ููุฏุฉ 3 ุซูุงู
    digitalWrite(BUZZER_PIN, HIGH);
    delay(3000);
    digitalWrite(BUZZER_PIN, LOW);
    
    // ูููุถ ุงูุฃุถูุงุก
    for (int i = 0; i < 5; i++) {
        digitalWrite(LED_PIN_1, HIGH);
        digitalWrite(LED_PIN_2, HIGH);
        delay(200);
        digitalWrite(LED_PIN_1, LOW);
        digitalWrite(LED_PIN_2, LOW);
        delay(200);
    }
}
```

### 5. ูุธุงู ูุดู ุงูุบุงุฒ ูุงูุทูุงุฑุฆ โฝ

```mermaid
flowchart TD
    A[๐จ ูุฑุงุกุฉ ุญุณุงุณ ุงูุบุงุฒ] --> B{โฝ ูุณุชูู ุงูุบุงุฒ > ุงูุญุฏ ุงูุขููุ}
    B -->|ูุง| C[โ ุงูููุงุก ูุธูู]
    B -->|ูุนู| D[๐จ ุฅูุฐุงุฑ ุทูุงุฑุฆ ููุฑู]
    D --> E[๐ ุชุดุบูู ุงูุชูููุฉ]
    E --> F[๐ฑ ุฅุฑุณุงู ุชูุจูู ุทูุงุฑุฆ]
    F --> G[๐ ุชุดุบูู ุฅูุฐุงุฑ ุนุงูู]
    G --> H[๐ช ูุชุญ ุงูููุงูุฐ ุชููุงุฆูุงู]
    H --> I[๐ ุงุชุตุงู ุจุงูุทูุงุฑุฆ]
    C --> J[๐ ุชุณุฌูู ุงููุฑุงุกุฉ]
    I --> J
```

**ุงูููุฏ ุงูููุงุจู:**
```cpp
void processGasDetection() {
    int gasLevel = analogRead(GAS_PIN);
    int gasPercent = map(gasLevel, 0, 4095, 0, 100);
    
    if (gasPercent > GAS_DANGER_THRESHOLD) {
        // ุญุงูุฉ ุทูุงุฑุฆ
        emergencyProtocol();
        Serial.println("๐จ ุฎุทุฑ! ุชู ุงูุชุดุงู ุบุงุฒ!");
        
    } else if (gasPercent > GAS_WARNING_THRESHOLD) {
        // ุชุญุฐูุฑ
        warningProtocol();
        Serial.println("โ๏ธ ุชุญุฐูุฑ: ูุณุชูู ุบุงุฒ ูุฑุชูุน");
        
    } else {
        // ุงููุถุน ุทุจูุนู
        currentStatus.gasAlert = false;
        Serial.println("โ ุฌูุฏุฉ ุงูููุงุก ุฌูุฏุฉ");
    }
    
    currentStatus.gasLevel = gasPercent;
}

void emergencyProtocol() {
    currentStatus.gasAlert = true;
    
    // ุชุดุบูู ุงูุชูููุฉ ุงููุงููุฉ
    digitalWrite(FAN_PIN, HIGH);
    
    // ูุชุญ ุงูููุงูุฐ (ูุญุฑูุงุช Servo)
    servo1.write(90);  // ูุชุญ ุงููุงูุฐุฉ 1
    servo2.write(90);  // ูุชุญ ุงููุงูุฐุฉ 2
    
    // ุฅูุฐุงุฑ ุทูุงุฑุฆ
    for (int i = 0; i < 10; i++) {
        digitalWrite(BUZZER_PIN, HIGH);
        delay(200);
        digitalWrite(BUZZER_PIN, LOW);
        delay(200);
    }
    
    // ุฅุฑุณุงู ุชูุจูู ุทูุงุฑุฆ
    sendEmergencyAlert("Gas Detection Alert!");
}
```

## ุฅุฏุงุฑุฉ ุงูุจูุงูุงุช ูุงูุฐุงูุฑุฉ ุงููุญุฏุซุฉ ๐พ

### ูููู ุจูุงูุงุช ุญุงูุฉ ุงููุธุงู ุงููุญุฏุซ:

```cpp
struct SmartHomeStatus {
    // ุจูุงูุงุช ุงูุญุณุงุณุงุช
    float temperature;
    float humidity;
    int lightLevel1;
    int lightLevel2;
    int gasLevel;
    bool motion1;
    bool motion2;
    
    // ุญุงูุฉ ุงูุฃุฌูุฒุฉ
    bool light1;
    bool light2;
    bool cooling;
    bool needHeating;
    bool gasAlert;
    
    // ูุธุงู ุงูุทุงูุฉ ุงูุดูุณูุฉ ุงูุฌุฏูุฏ โ๏ธ๐
    float batteryVoltage;
    int batteryPercentage;
    bool solarCharging;
    bool lowBattery;
    String powerSource;
    int powerConsumption;
    
    // ุฅุญุตุงุฆูุงุช
    unsigned long uptime;
    int alertCount;
    unsigned long lastUpdate;
    
    // ุนุฏุงุฏุงุช ุชูููุฑ ุงูุทุงูุฉ
    unsigned long energySavingTime;
    int energySavingActivations;
};

SmartHomeStatus homeStatus;
```

### 6. ูุธุงู ุฅุฏุงุฑุฉ ุงูุทุงูุฉ ุงููุชุฌุฏุฏุฉ ุงูุดุงูู โกโ๏ธ

```mermaid
flowchart TD
    A[๐ ุจุฏุงูุฉ ููู ุฌุฏูุฏ] --> B[โ๏ธ ูุญุต ุถูุก ุงูุดูุณ]
    B --> C{๐ ูู ุงูุดูุณ ูุดุฑูุฉุ}
    C -->|ูุนู| D[๐ ุจุฏุก ุงูุดุญู ุงูุดูุณู]
    C -->|ูุง| E[๐ ุงูุงุนุชูุงุฏ ุนูู ุงูุจุทุงุฑูุฉ]
    
    D --> F[๐ก LED ุฃุฎุถุฑ - ุดุญู ูุดุท]
    E --> G{๐ ูุณุชูู ุงูุจุทุงุฑูุฉุ}
    
    G -->|ุนุงูู >50%| H[๐ LED ุฃุฒุฑู - ูุถุน ุนุงุฏู]
    G -->|ูุชูุณุท 20-50%| I[๐ ุชุญุฐูุฑ - ุชูููุฑ ุทุงูุฉ]
    G -->|ููุฎูุถ <20%| J[โค๏ธ LED ุฃุญูุฑ - ุทูุงุฑุฆ]
    
    F --> K[๐ ุชุณุฌูู ุทุงูุฉ ููุชุณุจุฉ]
    H --> L[๐ ุชุดุบูู ุงููุธุงู ูุงููุงู]
    I --> M[โก ุชูููู ุงุณุชููุงู 30%]
    J --> N[๐จ ุชูููู ุงุณุชููุงู 60%]
    
    K --> O{๐ ุงูุจุทุงุฑูุฉ ููุชูุฆุฉุ}
    O -->|ูุนู| P[๐ ุฅููุงู ุงูุดุญู ุงูุฒุงุฆุฏ]
    O -->|ูุง| Q[๐ ุงุณุชูุฑุงุฑ ุงูุดุญู]
    
    L --> R[๐ ุฅุญุตุงุฆูุงุช ุงูุงุณุชููุงู]
    M --> R
    N --> S[๐ด ุฅููุงู ุงูุฃูุธูุฉ ุบูุฑ ุงูุญูููุฉ]
    
    P --> R
    Q --> R
    S --> R
    
    R --> T[๐พ ุญูุธ ุงูุจูุงูุงุช]
    T --> U[โฐ ุงูุชุธุงุฑ ุฏูููุฉ]
    U --> B
```

**ุงูููุฏ ุงูุดุงูู ูุฅุฏุงุฑุฉ ุงูุทุงูุฉ:**
```cpp
void comprehensivePowerManagement() {
    // ูุฑุงุกุฉ ุฌููุน ููู ุงูุทุงูุฉ
    readAllPowerParameters();
    
    // ุชุญุฏูุฏ ุงุณุชุฑุงุชูุฌูุฉ ุงูุทุงูุฉ
    determinePowerStrategy();
    
    // ุชูููุฐ ุงุณุชุฑุงุชูุฌูุฉ ุงูุทุงูุฉ
    implementPowerStrategy();
    
    // ุชุณุฌูู ุงูุจูุงูุงุช ูุงูุฅุญุตุงุฆูุงุช
    logPowerData();
}

void readAllPowerParameters() {
    // ูุฑุงุกุฉ ุฌูุฏ ุงูุจุทุงุฑูุฉ
    int voltageReading = analogRead(VOLTAGE_SENSOR_PIN);
    homeStatus.batteryVoltage = (voltageReading * 3.3 / 4095) * 2.0;
    
    // ุญุณุงุจ ูุณุจุฉ ุงูุดุญู
    homeStatus.batteryPercentage = map(homeStatus.batteryVoltage * 100, 1240, 1680, 0, 100);
    homeStatus.batteryPercentage = constrain(homeStatus.batteryPercentage, 0, 100);
    
    // ุชุญุฏูุฏ ุญุงูุฉ ุงูุดุญู ุงูุดูุณู
    homeStatus.solarCharging = (homeStatus.batteryVoltage > 15.5);
    homeStatus.lowBattery = (homeStatus.batteryPercentage < 20);
    
    // ุญุณุงุจ ุงูุงุณุชููุงู ุงูุญุงูู
    homeStatus.powerConsumption = calculateCurrentConsumption();
}

void determinePowerStrategy() {
    if (homeStatus.solarCharging && homeStatus.batteryPercentage > 80) {
        homeStatus.powerSource = "ุดูุณู-ููุชุงุฒ";
    } else if (homeStatus.solarCharging) {
        homeStatus.powerSource = "ุดูุณู-ุดุญู";
    } else if (homeStatus.batteryPercentage > 50) {
        homeStatus.powerSource = "ุจุทุงุฑูุฉ-ุฌูุฏ";
    } else if (homeStatus.batteryPercentage > 20) {
        homeStatus.powerSource = "ุจุทุงุฑูุฉ-ูุชูุณุท";
    } else {
        homeStatus.powerSource = "ุจุทุงุฑูุฉ-ุทูุงุฑุฆ";
    }
}

void implementPowerStrategy() {
    if (homeStatus.powerSource == "ุดูุณู-ููุชุงุฒ") {
        // ูุถุน ุงูุฃุฏุงุก ุงูุนุงูู
        fullPerformanceMode();
        digitalWrite(SOLAR_LED_PIN, HIGH);
        digitalWrite(BATTERY_LED_PIN, LOW);
        digitalWrite(SYSTEM_LED_PIN, LOW);
        
    } else if (homeStatus.powerSource == "ุดูุณู-ุดุญู") {
        // ูุถุน ุงูุดุญู ุงููุดุท
        normalPerformanceMode();
        digitalWrite(SOLAR_LED_PIN, HIGH);
        digitalWrite(BATTERY_LED_PIN, LOW);
        digitalWrite(SYSTEM_LED_PIN, LOW);
        
    } else if (homeStatus.powerSource == "ุจุทุงุฑูุฉ-ุฌูุฏ") {
        // ูุถุน ุนุงุฏู ุจุงูุจุทุงุฑูุฉ
        normalPerformanceMode();
        digitalWrite(SYSTEM_LED_PIN, HIGH);
        digitalWrite(SOLAR_LED_PIN, LOW);
        digitalWrite(BATTERY_LED_PIN, LOW);
        
    } else if (homeStatus.powerSource == "ุจุทุงุฑูุฉ-ูุชูุณุท") {
        // ูุถุน ุชูููุฑ ุทุงูุฉ ุฎููู
        moderateEnergySaving();
        blinkLED(SYSTEM_LED_PIN, 1000); // ุฑูุด ูู ุซุงููุฉ
        
    } else {
        // ูุถุน ุทูุงุฑุฆ
        emergencyEnergySaving();
        blinkLED(BATTERY_LED_PIN, 500); // ุฑูุด ุณุฑูุน
    }
}

int calculateCurrentConsumption() {
    int consumption = 50; // ESP32 base consumption
    
    if (homeStatus.light1) consumption += 20;
    if (homeStatus.light2) consumption += 20;  
    if (homeStatus.cooling) consumption += 150;
    if (digitalRead(BUZZER_PIN)) consumption += 30;
    if (lcd.getBacklight()) consumption += 10;
    
    return consumption;
}

void fullPerformanceMode() {
    // ุชุดุบูู ุฌููุน ุงูุฃูุธูุฉ ุจุฃูุตู ููุงุกุฉ
    Serial.println("๐ ูุถุน ุงูุฃุฏุงุก ุงูุนุงูู - ุทุงูุฉ ุดูุณูุฉ ููุชุงุฒุฉ");
    // ุฌููุน ุงูุฃูุธูุฉ ููุนูุฉ ุจุฏูู ูููุฏ
}

void normalPerformanceMode() {
    // ุชุดุบูู ุนุงุฏู ูุน ูุฑุงูุจุฉ
    Serial.println("โก ูุถุน ุงูุชุดุบูู ุงูุนุงุฏู");
    // ุชุดุบูู ุงูุฃูุธูุฉ ุญุณุจ ุงูุญุงุฌุฉ
}

void moderateEnergySaving() {
    // ุชูููุฑ ุทุงูุฉ ูุชูุณุท
    Serial.println("๐ก ูุถุน ุชูููุฑ ุงูุทุงูุฉ ุงููุชูุณุท");
    
    // ุชูููู ุณุทูุน ุงูุดุงุดุฉ
    // ุฅุทูุงุก ุงูุฅุถุงุกุฉ ุบูุฑ ุงูุถุฑูุฑูุฉ
    if (!homeStatus.motion1) digitalWrite(LED_PIN_1, LOW);
    if (!homeStatus.motion2) digitalWrite(LED_PIN_2, LOW);
}

void emergencyEnergySaving() {
    // ูุถุน ุงูุทูุงุฑุฆ - ุฃูุตู ุชูููุฑ
    Serial.println("๐ ูุถุน ุทูุงุฑุฆ - ุชูููุฑ ุทุงูุฉ ูุตูู");
    homeStatus.energySavingActivations++;
    
    // ุฅููุงู ุฌููุน ุงูุฃูุธูุฉ ุบูุฑ ุงูุญูููุฉ
    digitalWrite(LED_PIN_1, LOW);
    digitalWrite(LED_PIN_2, LOW);
    
    // ุฅููุงู ุงูุชุจุฑูุฏ ุฅูุง ูู ุญุงูุงุช ุงูุทูุงุฑุฆ
    if (homeStatus.temperature < 32.0 && !homeStatus.gasAlert) {
        digitalWrite(FAN_PIN, LOW);
    }
    
    // ุชูููู ุชูุฑุงุฑ ุงููุฑุงุกุงุช
    delay(2000); // ุงูุชุธุงุฑ ุฅุถุงูู
}

void blinkLED(int pin, int interval) {
    static unsigned long lastBlink = 0;
    static bool ledState = false;
    
    if (millis() - lastBlink > interval) {
        lastBlink = millis();
        ledState = !ledState;
        digitalWrite(pin, ledState);
    }
}
```

### 7. ูุธุงู ุงูุนุฑุถ ุงูุฐูู ูุน ูุนูููุงุช ุงูุทุงูุฉ ๐บ

```mermaid
flowchart TD
    A[๐บ ุจุฏุงูุฉ ุงูุนุฑุถ] --> B[โฐ ูุญุต ุงูููุช ููุฐ ุขุฎุฑ ุชุญุฏูุซ]
    B --> C{๐ ูุฑุช 3 ุซูุงูุ}
    C -->|ูุง| D[๐ ุงูุงุญุชูุงุธ ุจุงูุนุฑุถ ุงูุญุงูู]
    C -->|ูุนู| E[๐ ุชุบููุฑ ูุถุน ุงูุนุฑุถ]
    
    E --> F{๐ ูุถุน ุงูุนุฑุถ ุงูุญุงููุ}
    F -->|ูุถุน 0| G[๐ก๏ธ ุนุฑุถ ุจูุงูุงุช ุงูููุงุฎ]
    F -->|ูุถุน 1| H[โ๏ธ ุนุฑุถ ุจูุงูุงุช ุงูุทุงูุฉ]
    F -->|ูุถุน 2| I[๐ ุนุฑุถ ุฅุญุตุงุฆูุงุช ุงููุธุงู]
    
    G --> J[๐ฑ ุนุฑุถ ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ูุงูุฑุทูุจุฉ]
    H --> K[๐ ุนุฑุถ ุญุงูุฉ ุงูุจุทุงุฑูุฉ ูุงูุทุงูุฉ]
    I --> L[โฑ๏ธ ุนุฑุถ ููุช ุงูุชุดุบูู ูุงูุงุณุชููุงู]
    
    J --> M[๐จ ูุญุต ุญุงูุงุช ุงูุชูุจูู]
    K --> M
    L --> M
    
    M --> N{โ๏ธ ููุฌุฏ ุชูุจููุงุชุ}
    N -->|ูุนู| O[๐จ ุนุฑุถ ุฑุณุงุฆู ุงูุชุญุฐูุฑ]
    N -->|ูุง| P[โ ุนุฑุถ ุญุงูุฉ ุขููุฉ]
    
    O --> Q[๐บ ุชุญุฏูุซ ุงูุดุงุดุฉ]
    P --> Q
    D --> Q
    
    Q --> R[โฐ ุงูุชุธุงุฑ ูุจู ุงูุชุญุฏูุซ ุงูุชุงูู]
    R --> A
```

**ุงูููุฏ ุงููุญุฏุซ ููุนุฑุถ:**
```cpp
void updateSmartDisplay() {
    static int displayMode = 0;
    static unsigned long lastChange = 0;
    static int rotationSpeed = 3000; // 3 ุซูุงู ููู ูุถุน
    
    // ุชุนุฏูู ุณุฑุนุฉ ุงูุชุจุฏูู ุญุณุจ ุญุงูุฉ ุงูุทุงูุฉ
    if (homeStatus.lowBattery) {
        rotationSpeed = 5000; // ุชุจุฏูู ุฃุจุทุฃ ูุชูููุฑ ุงูุทุงูุฉ
    }
    
    if (millis() - lastChange > rotationSpeed) {
        lastChange = millis();
        displayMode = (displayMode + 1) % 4; // 4 ุฃูุถุงุน ุนุฑุถ
    }
    
    lcd.clear();
    
    switch (displayMode) {
        case 0: // ูุนูููุงุช ุงูููุงุฎ
            displayClimateInfo();
            break;
            
        case 1: // ูุนูููุงุช ุงูุทุงูุฉ ุงูุดูุณูุฉ
            displaySolarPowerInfo();
            break;
            
        case 2: // ุฅุญุตุงุฆูุงุช ุงููุธุงู
            displaySystemStats();
            break;
            
        case 3: // ูุนูููุงุช ุงูุฃูุงู ูุงูุชูุจููุงุช
            displaySecurityStatus();
            break;
    }
}

void displayClimateInfo() {
    lcd.setCursor(0, 0);
    lcd.print("T:");
    lcd.print(homeStatus.temperature, 1);
    lcd.print("C H:");
    lcd.print(homeStatus.humidity, 0);
    lcd.print("%");
    
    lcd.setCursor(0, 1);
    if (homeStatus.gasAlert) {
        lcd.print("โ๏ธ ุฎุทุฑ! ุบุงุฒ ููุชุดู");
    } else if (homeStatus.motion1 || homeStatus.motion2) {
        lcd.print("๐ฅ ุญุฑูุฉ ููุชุดูุฉ");
    } else {
        lcd.print("โ ุงูููุงุฎ ููุงุณุจ");
    }
}

void displaySolarPowerInfo() {
    lcd.setCursor(0, 0);
    lcd.print("โ๏ธ");
    lcd.print(homeStatus.powerSource);
    lcd.print(" ");
    lcd.print(homeStatus.batteryPercentage);
    lcd.print("%");
    
    lcd.setCursor(0, 1);
    lcd.print("๐");
    lcd.print(homeStatus.batteryVoltage, 1);
    lcd.print("V ");
    
    if (homeStatus.solarCharging) {
        lcd.print("ุดุญู");
    } else if (homeStatus.lowBattery) {
        lcd.print("ููุฎูุถ!");
    } else {
        lcd.print("ุฌูุฏ");
    }
}

void displaySystemStats() {
    lcd.setCursor(0, 0);
    lcd.print("โฑ๏ธุชุดุบูู:");
    lcd.print(homeStatus.uptime / 3600); // ุณุงุนุงุช
    lcd.print("h ");
    lcd.print((homeStatus.uptime % 3600) / 60); // ุฏูุงุฆู
    lcd.print("m");
    
    lcd.setCursor(0, 1);
    lcd.print("โกุงุณุชููุงู:");
    lcd.print(homeStatus.powerConsumption);
    lcd.print("mA");
}

void displaySecurityStatus() {
    lcd.setCursor(0, 0);
    if (homeStatus.gasAlert) {
        lcd.print("๐จ ุฎุทุฑ ุบุงุฒ!");
    } else if (homeStatus.motion1 || homeStatus.motion2) {
        lcd.print("๐๏ธ ูุดุงุท ููุชุดู");
    } else {
        lcd.print("๐ ุงููุธุงู ุขูู");
    }
    
    lcd.setCursor(0, 1);
    lcd.print("ุชูููุฑ ุทุงูุฉ:");
    lcd.print(homeStatus.energySavingActivations);
    lcd.print("x");
}
```

## ุฎูุงุฑุฒููุงุช ุงูุชุญุณูู ูุงูุชุนูู ุงูุฐูู ๐ค

### ูุธุงู ุงูุชุนูู ูู ุงูุฃููุงุท ุงูููููุฉ:

```cpp
void smartPatternLearning() {
    // ุชุนูู ุฃููุงุท ุงูุงุณุชุฎุฏุงู ุงูููููุฉ
    static int hourlyUsage[24] = {0};
    static int dailyPowerGeneration[24] = {0};
    static int weatherPattern[7] = {0}; // ุฃุณุจูุนู
    
    int currentHour = hour();
    int currentDay = weekday();
    
    // ุชุณุฌูู ุชูููุฏ ุงูุทุงูุฉ ุงูุดูุณูุฉ
    if (homeStatus.solarCharging) {
        dailyPowerGeneration[currentHour]++;
    }
    
    // ุชุณุฌูู ุฃููุงุท ุงูุงุณุชุฎุฏุงู
    if (homeStatus.motion1 || homeStatus.motion2) {
        hourlyUsage[currentHour]++;
    }
    
    // ุงูุชูุจุค ุจุงูุทูุณ ุญุณุจ ุงูุฃููุงุท
    if (dailyPowerGeneration[currentHour] > 10) {
        weatherPattern[currentDay] = 1; // ููู ูุดูุณ
    } else {
        weatherPattern[currentDay] = 0; // ููู ุบุงุฆู
    }
    
    // ุชุนุฏูู ุงุณุชุฑุงุชูุฌูุฉ ุงูุทุงูุฉ ุญุณุจ ุงูุชุนูู
    adaptPowerStrategy(hourlyUsage, dailyPowerGeneration);
}

void adaptPowerStrategy(int usage[], int generation[]) {
    int currentHour = hour();
    
    // ุฅุฐุง ูุงู ุงูุงุณุชุฎุฏุงู ูุฑุชูุน ูู ูุฐุง ุงูููุช
    if (usage[currentHour] > 5) {
        // ุงุญุชูุธ ุจุทุงูุฉ ุฅุถุงููุฉ
        if (homeStatus.batteryPercentage < 40) {
            Serial.println("๐ง ุชุนูู ุฐูู: ุชูููุฑ ุทุงูุฉ ุงุณุชุจุงูู");
            moderateEnergySaving();
        }
    }
    
    // ุฅุฐุง ูุงู ุงูุชูููุฏ ุงูุดูุณู ุถุนูู ุนุงุฏุฉ ูู ูุฐุง ุงูููุช
    if (generation[currentHour] < 2 && homeStatus.batteryPercentage < 60) {
        Serial.println("๐ง ุชูุจุค ุฐูู: ุดุญู ุถุนูู ูุชููุน");
        // ุจุฏุก ุชูููุฑ ุงูุทุงูุฉ ูุจูุฑุงู
        moderateEnergySaving();
    }
}
```

## ูุตุงุฆุญ ูุชุญุณูู ุงูุฃุฏุงุก ูุน ุงูุทุงูุฉ ุงูุดูุณูุฉ โก

### 1. ุชุญุณูู ููุงุกุฉ ุงูุทุงูุฉ:
- ุงุณุชุฎุฏู `millis()` ุจุฏูุงู ูู `delay()` ูุชูููุฑ ุงูุทุงูุฉ
- ุงูุฑุฃ ุงูุญุณุงุณุงุช ุจุชูุฑุงุฑ ูุชุบูุฑ ุญุณุจ ูุณุชูู ุงูุจุทุงุฑูุฉ
- ุงุณุชุฎุฏู ูุถุน Deep Sleep ุนูุฏ ุนุฏู ุงููุดุงุท ุงูุทููู

### 2. ุฅุฏุงุฑุฉ ุฐููุฉ ููุจุทุงุฑูุฉ:
- ุฑุงูุจ ุฏูุฑุงุช ุงูุดุญู ูุงูุชูุฑูุบ
- ุชุฌูุจ ุงูุชูุฑูุบ ุงูุนููู (ุฃูู ูู 10%)
- ุงุณุชุฎุฏู ูุธุงู BMS ููุญูุงูุฉ ูู ุงูุดุญู ุงูุฒุงุฆุฏ

### 3. ุชุญุณูู ุงููุธุงู ุงูุดูุณู:
- ูุฌู ุงูุฃููุงุญ ูุญู ุงูุดูุณ (ุฌููุจ ูู ุงููุตู ุงูุดูุงูู)
- ุญุงูุธ ุนูู ูุธุงูุฉ ุงูุฃููุงุญ ุงูุดูุณูุฉ
- ุฑุงูุจ ููุงุกุฉ ุงูุชุญููู ูุงูุทุงูุฉ ุงูููููุฏุฉ

### 4. ุงูููุซูููุฉ ูุงูุฃูุงู:
- ุฃุถู ุญูุงูุฉ ูู ุงูุฏูุงุฆุฑ ุงููุตูุฑุฉ
- ุงุณุชุฎุฏู ูููุฒุงุช ููุญูุงูุฉ ูู ุงูุชูุงุฑ ุงูุฒุงุฆุฏ
- ุฑุงูุจ ุฏุฑุฌุฉ ุญุฑุงุฑุฉ ุงูุจุทุงุฑูุงุช ุจุงุณุชูุฑุงุฑ

ุชุฐูุฑูุง: ุงููุธุงู ุงูุฐูู ูู ุงูุฐู ูุชุนูู ููุชููู ูุน ุงูุจูุฆุฉ ุงููุญูุทุฉ! ๐๐โ๏ธ 